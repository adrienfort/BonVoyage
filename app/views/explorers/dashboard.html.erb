<div class = "m-5">
  <h1>This is the <%= @explorer.nickname %> dashboard</h1>
  <p>find me in app/views/explorers/dashboard.html.erb</p>

  <%= cl_image_tag @explorer.photo.key, height: 48, width: 48, crop: :fill %>

  <div class="m-3">
    <p><%= link_to "Edit profile", edit_explorer_registration_path(@explorer) %></p>
  </div>

  <div class="m-3">
    <% if artist_signed_in? %>
      <%= link_to "Artist", dashboard_artist_path(current_artist.id) %>
    <% else %>
      <%= link_to "Artist", new_artist_session_path %>
    <% end %>
    <%= link_to "Destroy session", destroy_explorer_session_path, method: :delete, data: {confirm: "Are you sure ?"}, remote: true %>
  </div>

  <div class="m-3">
    <h3><%= pluralize(@fan_artists.count, "artist") %></h3>
    <% @fan_artists.each do |fan_artist| %>
      <div class="m-1">
        <%= link_to fan_artist.artist.name, explorer_artist_path(@explorer, fan_artist.artist) %>
        <%= link_to "| Destroy coup de foudre", explorer_artist_fan_artist_path(@explorer, fan_artist.artist, fan_artist), method: :delete, remote: true %>
      </div>
    <% end %>
  </div>

  <div class="m-3">
    <h3><%= pluralize(@fan_albums.count, "album") %></h3>
    <% @fan_albums.each do |fan_album| %>
      <div class="m-1">
        <%= link_to fan_album.album.name, explorer_artist_album_path(@explorer, fan_album.album.artist, fan_album.album) %>
        <%= link_to "| Destroy coup de foudre", explorer_artist_album_fan_album_path(@explorer, fan_album.album.artist, fan_album.album, fan_album), method: :delete, remote: true %>
      </div>
    <% end %>
  </div>

  <div class="m-3">
    <h3><%= pluralize(@playlists.count, "playlist") %></h3>
    <% @playlists.each do |playlist| %>
      <div class="m-1">
        <%= link_to playlist.name, explorer_playlist_path(@explorer, playlist) %>
        <%= link_to "| Edit #{playlist.name}", edit_explorer_playlist_path(@explorer, playlist) %>
        <%= link_to "| Destroy #{playlist.name}", explorer_playlist_path(@explorer, playlist),
                        method: :delete, data: { confirm: "Are you sure ?"}, remote: true %>
      </div>
    <% end %>
    <%= link_to "Create a new playlist", new_explorer_playlist_path(@explorer) %>
  </div>

  <div class="m-3">
    <h3><%= pluralize(@fan_musics.count, "coup") %> de foudre</h3>
    <% @fan_musics.each do |fan_music| %>
      <div class="m-1">
        <%= fan_music.music.name %>
        <%= link_to "Destroy coup de foudre", explorer_artist_album_music_fan_music_path(@explorer, fan_music.music.album.artist, fan_music.music.album, fan_music.music, fan_music), method: :delete, remote: true %>
        <%= link_to "Add to a playlist", new_explorer_music_playlist_music_path(@explorer, fan_music.music) %>
      </div>
    <% end %>
  </div>

</div>
